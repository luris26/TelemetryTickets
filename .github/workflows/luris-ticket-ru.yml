name: CI_LurisRunner
on: [push]
jobs:
  deploypipeline:
    runs-on: labelTicket
    steps:
      - name: "do something to remove"
        run: |
          rm -rf ./TelemetryTickets
      - name: "Clonning the repo"
        run: git clone https://${{secrets.CI_LURIS}}@github.com/luris26/TelemetryTickets.git
        

      - name: Test Unit
        run: | 
          # docker run --rm --network="container:dbcontainer" -v "$(pwd):/app" -w /app/elemetryTickets -e DOTNET_CLI_HOME="/tmp/dotnet" --user $(id -u):$(id -g) mcr.microsoft.com/dotnet/sdk:8.0 dotnet test
          cd ./TelemetryTickets/TicketsRUs.Tests   
          dotnet test 
#XD
      - name: "Teams Channel"
        uses: dchourasia/ms-teams-notification@1.0
        if: always()
        with:
            github-token: ${{ github.token }}
            webhook-uri: ${{ secrets.TEAMLURIS }}
        

      # - name: Test Integration Test
      #   run: | 
      #     cd ./TelemetryTickets/TicketsRus.IntegrationTest  
      #     dotnet test       

      # - name: Linting
      #   run: |
      #     cd ./TelemetryTickets/TicketsRUs.Tests 
      #     dotnet format --verify-no-changes --severity warn

      # - name: Warning Errors
      #   run: |
      #     cd ./TelemetryTickets/TicketsRUs.Tests

      # - name: "Run docker compose"
      #   run: |
      #     cd ./TelemetryTickets/LurisDockercompose
      #     docker compose up --build -d
##
      


#Do something
################################################Im Done#############################################################################


